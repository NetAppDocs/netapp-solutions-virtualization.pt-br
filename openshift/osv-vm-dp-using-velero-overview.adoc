---
sidebar: sidebar 
permalink: openshift/osv-vm-dp-using-velero-overview.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OpenShift Virtualization, CNV, Container Native Virtualization, Red Hat OpenShift Virtualization, OADP operator, Openshift Data Protection Application operator, velero 
summary: Proteção de dados de virtualização Red Hat OpenShift com NetApp ONTAP 
---
= Aprenda sobre proteção de dados para VMs no Red Hat OpenShift Virtualization usando a API OpenShift para proteção de dados (OADP)
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
A API OpenShift para proteção de dados (OADP) com Velero fornece recursos de backup, restauração e recuperação de desastres para VMs no OpenShift Virtualization.  Use snapshots do Trident CSI para fazer backup de volumes persistentes e metadados de VM no NetApp ONTAP S3 ou StorageGRID S3.  O OADP integra-se com APIs Velero e drivers de armazenamento CSI para gerenciar operações de proteção de dados para VMs em contêineres.

As máquinas virtuais no ambiente de virtualização OpenShift são aplicativos em contêineres executados nos nós de trabalho da sua plataforma OpenShift Container. É importante proteger os metadados da VM, bem como os discos persistentes das VMs, para que, quando eles forem perdidos ou corrompidos, você possa recuperá-los.

Os discos persistentes das VMs de virtualização OpenShift podem ser apoiados pelo armazenamento ONTAP integrado ao cluster OpenShift usandolink:https://docs.netapp.com/us-en/trident/["Trident CSI"] . Nesta seção usamoslink:https://docs.openshift.com/container-platform/4.14/backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.html["API OpenShift para Proteção de Dados (OADP)"] para executar backup de VMs, incluindo seus volumes de dados para

* Armazenamento de objetos ONTAP
* StorageGrid


Em seguida, restauramos a partir do backup quando necessário.

O OADP permite backup, restauração e recuperação de desastres de aplicativos em um cluster OpenShift. Os dados que podem ser protegidos com OADP incluem objetos de recursos do Kubernetes, volumes persistentes e imagens internas.

image:redhat-openshift-oadp-001.png["API OpenShift para proteção de dados"]

O Red Hat OpenShift aproveitou as soluções desenvolvidas pelas comunidades OpenSource para proteção de dados. link:https://velero.io/["Velero"] é uma ferramenta de código aberto para fazer backup e restaurar com segurança, executar recuperação de desastres e migrar recursos de cluster e volumes persistentes do Kubernetes. Para usar o Velero facilmente, a OpenShift desenvolveu o operador OADP e o plugin Velero para integração com os drivers de armazenamento CSI. O núcleo das APIs OADP expostas são baseadas nas APIs Velero. Após instalar o operador OADP e configurá-lo, as operações de backup/restauração que podem ser executadas são baseadas nas operações expostas pela API do Velero.

image:redhat-openshift-oadp-002.png["API OpenShift para proteção de dados"]

O OADP 1.3 está disponível no hub do operador do cluster OpenShift 4.12 e posteriores. Ele tem um Data Mover integrado que pode mover instantâneos de volume CSI para um armazenamento de objetos remoto. Isso proporciona portabilidade e durabilidade ao mover instantâneos para um local de armazenamento de objetos durante o backup. Os instantâneos ficam então disponíveis para restauração após desastres.

**A seguir estão as versões dos vários componentes usados nos exemplos desta seção**

* Cluster OpenShift 4.14
* OpenShift Virtualization instalado via OperatorOpenShift Virtualization Operator fornecido pela Red Hat
* Operador OADP 1.13 fornecido pela Red Hat
* Velero CLI 1.13 para Linux
* Trident 24.02
* ONTAP 9.12


link:https://docs.netapp.com/us-en/trident/["Trident CSI"] link:https://docs.openshift.com/container-platform/4.14/backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.html["API OpenShift para Proteção de Dados (OADP)"] link:https://velero.io/["Velero"]
